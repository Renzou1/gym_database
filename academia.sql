CREATE DATABASE ACADEMIA;
\c academia
CREATE SCHEMA ACADEMIA AUTHORIZATION POSTGRES;
SET search_path TO ACADEMIA;

CREATE TABLE ALUNO(
PNOME VARCHAR(15) NOT NULL,
MNOME CHAR,
SNOME VARCHAR(15) NOT NULL,
DATANASC DATE,
CPF CHAR(11) NOT NULL,
TELEFONE CHAR(11),

PRIMARY KEY (CPF)
);

CREATE TABLE INSTRUTOR(
PNOME VARCHAR(15) NOT NULL,
MNOME CHAR,
SNOME VARCHAR(15) NOT NULL,
CPF CHAR(11) NOT NULL,
SALARIO DECIMAL(10,2),
TELEFONE CHAR(11),

PRIMARY KEY (CPF)
);

CREATE TABLE AUXILIA(
CPFINSTRUTOR CHAR(11) NOT NULL,
CPFALUNO CHAR(11) NOT NULL,

FOREIGN KEY (CPFINSTRUTOR) REFERENCES INSTRUTOR (CPF),
FOREIGN KEY (CPFALUNO) REFERENCES ALUNO (CPF)
);

CREATE TABLE PAGAMENTO(
CODIGO INT NOT NULL,
VALOR INT NOT NULL,
DATA DATE NOT NULL,
ALUNOCPF CHAR(11) NOT NULL,

PRIMARY KEY (CODIGO),
FOREIGN KEY (ALUNOCPF) REFERENCES ALUNO (CPF)
);

CREATE TABLE TREINO(
ID INT NOT NULL,
DATA DATE NOT NULL,
ALUNOCPF CHAR(11) NOT NULL,
INSTRUTORCPF CHAR(11),

PRIMARY KEY (ID)
);

CREATE TABLE USOEQUIPAMENTOS(
ID INT NOT NULL,
TREINOID INT,
NOME VARCHAR(25) NOT NULL,
MUSCULOFOCO VARCHAR(15) NOT NULL,
PESO INT,
REPETICOES INT,

PRIMARY KEY (ID),
FOREIGN KEY (TREINOID) REFERENCES TREINO (ID)
);

CREATE TABLE PLANOALUNO(
ALUNOCPF CHAR(11) NOT NULL,
MODALIDADE VARCHAR(15) NOT NULL,
INICIO DATE NOT NULL,
FIM DATE,

FOREIGN KEY (ALUNOCPF) REFERENCES ALUNO (CPF)
);

CREATE TABLE HORARIOS(
ALUNOCPF CHAR(11) NOT NULL,
SEGUNDA INT,
TERCA INT,
QUARTA INT,
QUINTA INT,
SEXTA INT,

FOREIGN KEY (ALUNOCPF) REFERENCES ALUNO (CPF)
);


INSERT INTO ALUNO VALUES
    ('Alice', 'M', 'Smith', '1995-01-01', '12345678901', '98765432101'),
    ('Bob', 'J', 'Johnson', '1996-02-02', '23456789012', '87654321012'),
    ('Catherine', 'K', 'Davis', '1997-03-03', '34567890123', '76543210923'),
    ('Daniel', 'L', 'Miller', '1998-04-04', '45678901234', '65432109834'),
    ('Eva', 'A', 'Brown', '1999-05-05', '56789012345', '54321098745'),
    ('Frankie', 'C', 'Wilson', '2000-06-06', '67890123456', '43210987656'),
    ('George', 'D', 'Jones', '2001-07-07', '78901234567', '32109876567'),
    ('Hannah', 'E', 'Taylor', '2002-08-08', '89012345678', '21098765478'),
    ('Ian', 'I', 'Clark', '2003-09-09', '90123456789', '10987654389'),
    ('Jessica', 'F', 'Moore', '2004-10-10', '01234567890', '98765432190');


INSERT INTO INSTRUTOR VALUES
    ('Jake', 'W', 'Anderson', '11122334455', 45000.00, '98765432101'),
    ('Sophia', 'R', 'Smith', '22233445566', 48000.50, '87654321012'),
    ('Daniel', 'E', 'Robinson', '33344556677', 52000.75, '76543210923'),
    ('Grace', 'P', 'Harrison', '44455667788', 43000.25, '65432109834'),
    ('Nathan', 'Q', 'Baker', '55566778899', 40000.90, '54321098745'),
    ('Isabella', 'X', 'Taylor', '66677889900', 47000.00, '43210987656'),
    ('Ethan', 'Y', 'Johnson', '77788990011', 50000.80, '32109876567'),
    ('Ava', 'Z', 'Williams', '88899001122', 52000.60, '21098765478'),
    ('Liam', 'M', 'Miller', '99900112233', 42000.40, '10987654389'),
    ('Emma', 'L', 'Davis', '12300112234', 49000.70, '98765432190');



INSERT INTO HORARIOS VALUES
    ('12345678901', 13, NULL, 15, 16, 17),
    ('23456789012', 14, 15, NULL, 17, 13),
    ('34567890123', NULL, 16, 17, 13, 14),
    ('45678901234', 16, 17, 13, NULL, 15),
    ('56789012345', 17, 13, NULL, NULL, 16);


INSERT INTO PLANOALUNO VALUES
    ('12345678901', 'Funcional', '2024-01-01', '2024-12-31'),
    ('23456789012', 'Saude', '2024-02-01', '2024-12-31'),
    ('34567890123', 'Musculacao', '2024-03-01', '2024-12-31'),
    ('45678901234', 'Funcional', '2024-04-01', '2024-12-31'),
    ('56789012345', 'Musculacao', '2024-05-01', '2024-12-31'),
    ('67890123456', 'Saude', '2024-06-01', '2024-12-31'),
    ('78901234567', 'Funcional', '2024-07-01', '2024-12-31'),
    ('89012345678', 'Musculacao', '2024-08-01', '2024-12-31'),
    ('90123456789', 'Saude', '2024-09-01', '2024-12-31'),
    ('01234567890', 'Funcional', '2024-10-01', '2024-12-31');

INSERT INTO TREINO VALUES
    (1, '2024-03-15', '12345678901', '11122334455'),
    (2, '2024-03-16', '23456789012', '22233445566'),
    (3, '2024-03-17', '34567890123', '33344556677'),
    (4, '2024-03-18', '45678901234', '44455667788'),
    (5, '2024-03-19', '56789012345', '55566778899'),
    (6, '2024-03-20', '67890123456', '66677889900'),
    (7, '2024-03-21', '78901234567', '77788990011'),
    (8, '2024-03-22', '89012345678', '88899001122'),
    (9, '2024-03-23', '90123456789', '99900112233'),
    (10, '2024-03-24', '01234567890', '12300112234');

INSERT INTO AUXILIA VALUES
    ('11122334455', '12345678901'),
    ('22233445566', '23456789012'),
    ('33344556677', '34567890123'),
    ('44455667788', '45678901234'),
    ('55566778899', '56789012345'),
    ('66677889900', '67890123456'),
    ('77788990011', '78901234567'),
    ('88899001122', '89012345678'),
    ('99900112233', '90123456789'),
    ('12300112234', '01234567890');


INSERT INTO PAGAMENTO VALUES
    (1, 150, '2024-03-15', '12345678901'),
    (2, 200, '2024-03-16', '23456789012'),
    (3, 180, '2024-03-17', '34567890123'),
    (4, 220, '2024-03-18', '45678901234'),
    (5, 190, '2024-03-19', '56789012345'),
    (6, 170, '2024-03-20', '67890123456'),
    (7, 210, '2024-03-21', '78901234567'),
    (8, 240, '2024-03-22', '89012345678'),
    (9, 200, '2024-03-23', '90123456789'),
    (10, 180, '2024-03-24', '01234567890');


INSERT INTO USOEQUIPAMENTOS VALUES
    (1, 1, 'Anilha', 'Braco', 50, 10),
    (2, 2, 'Bola de Pilates', 'Perna', 60, 12),
    (3, 3, 'Esteira', 'Cardio', 70, 15),
    (4, 4, 'Haltere', 'Ombro', 40, 8),
    (5, 5, 'Barra de Pull-Up', 'Costas', 55, 11),
    (6, 6, 'Bicicleta Ergometrica', 'Cardio', 65, 13),
    (7, 7, 'Corda de Pular', 'Perna', 45, 9),
    (8, 8, 'Kettlebell', 'Abdomen', 75, 18),
    (9, 9, 'Maquina de Remo', 'Costas', 80, 20),
    (10, 10, 'TRX', 'Braço', 30, 6);

    -- comandos usados na parte escrita em python para seleção de dados:
    -- (algumas aspas são para o código python reconhecer corretamente)

    -- historico aluno:
    --"""SELECT * FROM TREINO WHERE ALUNOCPF='""" + cpf + """'"""

    --alunos de instrutor:
    -- """SELECT PNOME, MNOME, SNOME FROM ALUNO JOIN AUXILIA ON CPFALUNO = CPF 
    --WHERE CPFINSTRUTOR ='""" + cpf + """'"""

    --todos alunos:
    --"SELECT * FROM ALUNO"

    -- todos instrutores:
    -- "SELECT * FROM INSTRUTOR"

    -- progresso aluno:
    -- """SELECT NOME, MUSCULOFOCO, PESO, REPETICOES FROM USOEQUIPAMENTOS U JOIN TREINO T 
    -- ON U.TREINOID = T.ID 
    -- WHERE ALUNOCPF ='""" + cpf + """'"""

    -- horarios aluno:
    --  """SELECT SEGUNDA,TERCA,QUARTA,QUINTA,SEXTA FROM HORARIOS 
    -- WHERE ALUNOCPF ='""" + cpf + """'"""

    -- horarios dos alunos instrutor:
    --  """SELECT SEGUNDA, TERCA, QUARTA, QUINTA, SEXTA FROM INSTRUTOR JOIN
    -- AUXILIA ON CPFINSTRUTOR = CPF JOIN HORARIOS ON CPFALUNO = ALUNOCPF 
    -- WHERE CPFINSTRUTOR ='""" + cpf + """'"""

    -- pagamentos dos alunos do instrutor:
    -- """SELECT CODIGO, VALOR, DATA, ALUNOCPF FROM INSTRUTOR JOIN
    -- AUXILIA ON CPFINSTRUTOR = CPF JOIN PAGAMENTO ON ALUNOCPF = CPFALUNO 
    -- WHERE CPFINSTRUTOR ='""" + cpf + """'"""



